# =============================================================================
# ITSM Service Catalogue - Environment Configuration Example
# =============================================================================
# SPDX-License-Identifier: Apache-2.0
# SPDX-FileCopyrightText: 2024-2026 David Kleinhans, Jade University of Applied Sciences
#
# Copy this file to env/itsm.env and configure for your environment.
# NEVER commit the actual itsm.env file (it's in .gitignore)
# =============================================================================

# =============================================================================
# ENVIRONMENT MODE
# =============================================================================
# DJANGO_ENV controls the application mode:
#
# production (DJANGO_ENV=production):
#   • DEBUG: Defaults to False (secure error pages)
#   • Authentication: Keycloak SSO via OAuth2-proxy (upstream proxy handles authentication)
#   • Security cookies: Secure, HTTPS-only
#   • Upstream authentication stack required (nginx + OAuth2-proxy + Keycloak)
#   • See: https://github.com/scinnod/django-auth-stack
#
# development (DJANGO_ENV=development):
#   • DEBUG: Defaults to True (detailed error pages)
#   • Authentication: Django ModelBackend (username/password via /admin/login/)
#   • Security cookies: Not required to be secure (works over HTTP)
#   • No external authentication stack needed
#
DJANGO_ENV=production

# DEBUG Mode Configuration
# Default: False in production
#
# ⚠️  WARNING: NEVER ENABLE DEBUG IN PRODUCTION! ⚠️
# Debug mode exposes:
#   - Sensitive configuration and environment variables
#   - Full stack traces with source code
#   - SQL queries and database structure
#   - File paths and system information
# This creates severe security vulnerabilities and performance issues.
#
# Leave this commented out to use the safe default (False):
# DEBUG=False

# Production hosts (update with your actual domain)
ALLOWED_HOSTS=your-domain.com
CSRF_TRUSTED_ORIGINS=https://your-domain.com

# Organization branding and contact information
# Customize these settings for your organization
ORGANIZATION_NAME=Your Organization Name
ORGANIZATION_ACRONYM=ORG
HELPDESK_EMAIL=helpdesk@your-domain.com
HELPDESK_PHONE=+1-555-1234

# Corporate Identity - Colors (hex codes without #)
# Customize with your organization's brand colors
PRIMARY_COLOR=0d6efd
SECONDARY_COLOR=6610f2
# Logo file name (must be in overrides/static/logos/ directory)
# See overrides/README.md for setup instructions
LOGO_FILENAME=logo.png

# SECRET_KEY is generated automatically in entrypoint.sh and stored in /secrets/django_secret_key
# Do not set SECRET_KEY here - it will be read from the secret key file

# Database configuration is set in docker-compose.yml
# PostgreSQL runs on internal Docker network only (not exposed externally)
# Database: itsm
# User: itsm_user (configured in postgres service environment)
# Current POSTGRES_APP_PASSWORD is secure for internal Docker network use
# Change to a strong password if exposing PostgreSQL outside Docker network
# No user configuration needed for the default setup

# =============================================================================
# Service Catalogue Field Visibility (Optional)
# =============================================================================
# Control which fields appear in the service catalogue.
# Disabling fields removes them from:
#   - Admin interface
#   - Public and internal views
#   - XLSX and PDF exports
#   - Fulltext search
# Database values are preserved regardless of these settings.
#
# All fields default to True (visible) if not specified.
# Set to False to hide a field from the application.
#
# Examples demonstrating flexibility:
#
# Hide 'keywords' field (internal search tags not needed by users):
# SERVICECATALOGUE_FIELD_KEYWORDS=False
#
# Hide 'requirements' field (if requirements are not relevant):
# SERVICECATALOGUE_FIELD_REQUIREMENTS=False
#
# Hide 'usage_information' field (to simplify service presentation):
# SERVICECATALOGUE_FIELD_USAGE_INFORMATION=False
#
# Hide 'details' field (for concise service descriptions):
# SERVICECATALOGUE_FIELD_DETAILS=False
#
# Hide 'options' field (if services don't have options):
# SERVICECATALOGUE_FIELD_OPTIONS=False
#
# Show 'service_level' field (if SLA/availability info is tracked, opt-in):
# SERVICECATALOGUE_FIELD_SERVICE_LEVEL=True
#
# Example: Minimal service catalogue showing only core fields:
# SERVICECATALOGUE_FIELD_KEYWORDS=False
# SERVICECATALOGUE_FIELD_REQUIREMENTS=False
# SERVICECATALOGUE_FIELD_DETAILS=False
# SERVICECATALOGUE_FIELD_OPTIONS=False
# SERVICECATALOGUE_FIELD_SERVICE_LEVEL=False # default setting

# =============================================================================
# User Access Control (Optional)
# =============================================================================
# Control user creation and access restrictions. Useful for initial setup,
# testing, or restricting access to a controlled group of users.
#
# AUTO_CREATE_USERS: Automatically create users on first login via SSO
#   Default: True - Users are automatically created when they first authenticate
#   Set to False to prevent automatic user creation. Only pre-existing users
#   (created manually via Django admin) will be able to log in.
#   Useful during initial setup when access should be restricted to specific users.
#
# STAFF_ONLY_MODE: Restrict all access to staff users only
#   Default: False - All authenticated users can access non-staff views
#   Set to True to require is_staff=True for ALL authenticated access.
#   Non-staff users will see an "insufficient privileges" page with their
#   username and options to log out or request access.
#   Useful during initial setup, maintenance, or restricted access periods.
#
# Examples:
#
# Allow only pre-existing users (no automatic account creation):
# AUTO_CREATE_USERS=False
#
# Restrict entire application to staff users only:
# STAFF_ONLY_MODE=True
#
# Combined: Only pre-existing staff users can access:
# AUTO_CREATE_USERS=False
# STAFF_ONLY_MODE=True

# =============================================================================
# View Access Control (Optional)
# =============================================================================
# Control which views require authentication. This allows you to customize
# the public/protected boundary of your service catalogue.
#
# Note: Internal views (available, upcoming, retired, under revision) and
# Django admin always require authentication regardless of these settings.
#
# ONLINE_SERVICES_REQUIRE_LOGIN: Online Services landing page (/sc/)
#   Default: False (public) - Quick links to online services are publicly accessible
#   Set to True if you want to require login even for the landing page
#
# SERVICE_CATALOGUE_REQUIRE_LOGIN: Service Catalogue and Service Details
#   Applies to: /sc/services/ (list view) and /sc/service/<id>/ (detail view)
#   Default: True (protected) - Users must login to browse the catalogue and view details
#   Set to False if you want the catalogue and service details to be publicly accessible
#
# AI_SEARCH_REQUIRE_LOGIN: AI-Assisted Search (/sc/ai-search/)
#   Default: True (protected) - Users must login to use AI search
#   IMPORTANT: AI search ALWAYS requires login if SERVICE_CATALOGUE_REQUIRE_LOGIN=True
#   This prevents information leakage - if services are protected, searching them must be too
#   To make AI search public, you must set BOTH settings to False
#   Note: This only applies if AI_SEARCH_ENABLED is True
#
# Examples:
#
# Make the full catalogue and service details public (no login required):
# SERVICE_CATALOGUE_REQUIRE_LOGIN=False
# AI_SEARCH_REQUIRE_LOGIN=False  # AI search can now be public too
#
# Require login for everything (including online services landing page):
# ONLINE_SERVICES_REQUIRE_LOGIN=True
#
# Keep catalogue protected but make AI search more restrictive:
# SERVICE_CATALOGUE_REQUIRE_LOGIN=True  # Catalogue requires login
# AI_SEARCH_REQUIRE_LOGIN=True          # AI search also requires login (inherited)

# =============================================================================
# AI-Assisted Service Search Configuration (Optional)
# =============================================================================
# Enable AI-powered search to help users find relevant services based on 
# natural language problem descriptions. Uses a two-step process:
#   1. Initial evaluation: Determines if problem is IT-related, identifies candidate services
#   2. Detailed analysis: Analyzes candidate services and provides recommendations
#
# IMPORTANT SECURITY AND PRIVACY CONSIDERATIONS:
# ⚠️  Information Security: Consider your organization's data protection policies
# ⚠️  Privacy: User queries and AI responses are NOT logged (only metadata is saved)
# ⚠️  Recommendation: Use KISSKI AI (University of Göttingen) or similar privacy-respecting services
#
# For KISSKI AI (University of Göttingen):
#   - OpenAI-compatible API format
#   - Contact your KISSKI administrator for credentials
#   - Example API URL: https://api.kisski.de/v1
#   - Supports various AI models (GPT-4, GPT-3.5-turbo, etc.)
#
# Testing & Debugging:
#   Run: python manage.py test_ai_search
#   This checks configuration, network connectivity, and API authentication
#   Use --verbose flag for detailed request/response information
#
# Enable AI search feature (default: False)
# AI_SEARCH_ENABLED=True
#
# AI API endpoint URL (OpenAI-compatible format)
# Provide the base URL only - /chat/completions is automatically appended by the application
# Example for KISSKI: AI_SEARCH_API_URL=https://chat-ai.academiccloud.de/v1
# AI_SEARCH_API_URL=
#
# AI API authentication key (obtain from your AI service provider)
# AI_SEARCH_API_KEY=your-api-key-here
#
# AI model to use (default: deepseek-r1)
# Recommended KISSKI models:
#   - deepseek-r1 (reasoning model - RECOMMENDED but outputs <think> tags, handled automatically)
#   - qwen3-235b-a22b (reasoning model - alternative, may be faster)
#   - mistral-large-instruct (general purpose - good balance of speed and quality)
#   - llama-3.3-70b-instruct (general purpose - faster responses)
# Note: Reasoning models (deepseek-r1, qwen3) provide better analysis but may be slower
# See KISSKI documentation for complete model list
# AI_SEARCH_MODEL=deepseek-r1
#
# AI request timeout in seconds (default: 180 = 3 minutes)
# Increase if searches timeout frequently, decrease for faster failures
# AI_SEARCH_TIMEOUT=180
#
# Data Protection Statement for AI Search (Optional)
# Inform users about AI provider, model, data handling, and privacy measures.
# Displayed on the AI search page when the feature is properly configured.
# Use HTML formatting if needed (e.g., <strong>, <a href="">, <br>).
#
# Example English statement:
# AI_SEARCH_DATA_PROTECTION_STATEMENT_EN=This search uses the <strong>deepseek-r1</strong> model via KISSKI AI (University of Göttingen). Your queries are processed securely and are <strong>not stored or used for training</strong>. For more information, see our <a href="/privacy">privacy policy</a>.
#
# Example German statement:
# AI_SEARCH_DATA_PROTECTION_STATEMENT_DE=Diese Suche nutzt das Modell <strong>deepseek-r1</strong> über KISSKI AI (Universität Göttingen). Ihre Anfragen werden sicher verarbeitet und <strong>nicht gespeichert oder für Training verwendet</strong>. Weitere Informationen finden Sie in unserer <a href="/privacy">Datenschutzerklärung</a>.
